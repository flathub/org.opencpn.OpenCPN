From: Alec Leamas <leamas.alec@gmail.com>
Date: Sun, 11 Aug 2024 08:50:47 +0200
Subject: Build: Don't use -march=native (#4088)

Bug: https://github.com/OpenCPN/OpenCPN/issues/4088

---
 libs/mipmap/CMakeLists.txt              | 4 ++--
 libs/mipmap/cmake/CompilerSupport.cmake | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/libs/mipmap/CMakeLists.txt b/libs/mipmap/CMakeLists.txt
index cb1a185..4aa31cb 100644
--- a/libs/mipmap/CMakeLists.txt
+++ b/libs/mipmap/CMakeLists.txt
@@ -37,8 +37,8 @@ if( NOT QT_ANDROID)
   if (NOT MSVC)
       set_property(TARGET MIPMAP PROPERTY COMPILE_FLAGS "-fvisibility=hidden -O3")
       if (NOT APPLE)
-          set_source_files_properties(
-            src/mipmap.c PROPERTIES COMPILE_FLAGS "-march=native")
+          # set_source_files_properties(
+          #   src/mipmap.c PROPERTIES COMPILE_FLAGS "-march=native")
       endif()
       if (HAVE_MSSE)
           message(STATUS "mipmap SSE support enabled")
diff --git a/libs/mipmap/cmake/CompilerSupport.cmake b/libs/mipmap/cmake/CompilerSupport.cmake
index e02d8de..8a32876 100644
--- a/libs/mipmap/cmake/CompilerSupport.cmake
+++ b/libs/mipmap/cmake/CompilerSupport.cmake
@@ -12,7 +12,7 @@ if(HAVE_ARM_NEON)
 endif()
 
 #set(CMAKE_REQUIRED_INCLUDES /usr/lib/gcc/x86_64-redhat-linux/13/include/)
-set(CMAKE_REQUIRED_FLAGS "-march=native")
+#set(CMAKE_REQUIRED_FLAGS "-march=native")
 
 include(CheckCSourceCompiles)
 check_c_source_compiles(
