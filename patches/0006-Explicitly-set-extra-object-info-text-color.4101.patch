From 4d15ec37c5c45bb73b8ad0d176d20d8f4888d33e Mon Sep 17 00:00:00 2001
From: Pavel Kalian <pavel@kalian.cz>
Date: Sat, 17 Aug 2024 20:16:37 -0300
Subject: [PATCH] Explicitly set extra object info text color. Fixes #4101

Bug:  https://github.com/OpenCPN/OpenCPN/issues/4101
Applied-upstream: https://github.com/OpenCPN/OpenCPN/commit/4d15ec37

---
 gui/src/S57QueryDialog.cpp | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/gui/src/S57QueryDialog.cpp b/gui/src/S57QueryDialog.cpp
index 7d88b464d..b92cfc836 100644
--- a/gui/src/S57QueryDialog.cpp
+++ b/gui/src/S57QueryDialog.cpp
@@ -229,6 +229,14 @@ void S57QueryDialog::OnHtmlLinkClicked(wxHtmlLinkEvent& event) {
     wxTextFile txf(filen.GetFullPath());
     if (txf.Open()) {
       wxString contents;
+      if (filen.GetExt().Lower() == "txt") {
+        contents +=
+            "<font color="
+            "" +
+            GetForegroundColour().GetAsString(wxC2S_HTML_SYNTAX) +
+            ""
+            ">";
+      }
       wxString str;
       str = txf.GetFirstLine();
       do {
@@ -239,6 +247,9 @@ void S57QueryDialog::OnHtmlLinkClicked(wxHtmlLinkEvent& event) {
 
         str = txf.GetNextLine();
       } while (!txf.Eof());
+      if (filen.GetExt().Lower() == "txt") {
+        contents += "</font>";
+      }
 
       ExtraObjInfoDlg->m_phtml->SetPage(contents);
     }
-- 
2.45.2

